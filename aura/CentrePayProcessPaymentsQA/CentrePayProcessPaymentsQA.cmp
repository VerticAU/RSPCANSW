<aura:component description="CentrePayProcessPaymentsQA" extends="c:vertic_Base" implements="force:lightningQuickActionWithoutHeader,force:appHostable,force:hasSObjectName">

    <lightning:notificationsLibrary aura:id="notifyLib"/>

    <aura:handler name="init" value="{!this}" action="{!c.handleInit}"/>

    <aura:attribute name="disabled" type="Boolean" default="true"/>

    <force:recordData aura:id="recordLoader"
                      recordId="{!v.recordId}"
                      fields="Id, One_Drive_Folder_Name__c"
                      targetFields="{!v.recordFields }"
                      targetError="{!v.recordError}"
    />
    <aura:attribute name="recordName" type="String" access="global" default="{!v.recordFields.One_Drive_Folder_Name__c == null ? v.recordId : v.recordFields.One_Drive_Folder_Name__c }"/>

<!--    <c:OneDriveUtils aura:id="OneDriveUtils"/>-->

    <c:vertic_QuickActionModal aura:id="modal"
                               heightPX="250"
                               title="Process CentrePay Payments"
                               widthPercentage="80"
                               maxWidthRem="60"
                               minWidthRem="20"
                               showCancel="false">

        <div class="slds-grid slds-align_absolute-center slds-m-around_large">
            <div class="slds-m-horizontal_medium">
                <p>Drag and drop or search for the import file you wish to process.</p>
            </div>
            <lightning:input label="Upload"
                             aura:id="upload"
                             variant="label-hidden"
                             type="file"
                             accept=".csv"
                             multiple="{!false}"
                             onchange="{!c.handleFilesChange}"
                             disabled="{!v.isBusy}"
            />
        </div>

        <aura:set attribute="footer">
            <lightning:button label="Close" variant="neutral" type="submit" onclick="{!c.handleCloseClick}"/>
            <lightning:button label="Process" variant="brand" type="submit" disabled="{! or(v.isBusy, v.disabled) }" onclick="{!c.handleProcess}"/>
        </aura:set>
    </c:vertic_QuickActionModal>

</aura:component>